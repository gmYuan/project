{"version":3,"file":"vue.js","sources":["../../src/shared/constants.js","../../src/utils/index.js","../../src/observer/array.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/utils/next-tick.js","../../src/observer/scheduler.js","../../src/observer/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/index.js","../../src/render.js","../../src/global-api/mixin.js","../../src/global-api/extend.js","../../src/global-api/assets.js","../../src/global-api/index.js","../../src/index.js"],"sourcesContent":["export const SSR_ATTR = 'data-server-rendered'\n\nexport const ASSET_TYPES = [\n  'component',\n  'directive',\n  'filter'\n]\n\nexport const LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n  'activated',\n  'deactivated',\n  'errorCaptured',\n  'serverPrefetch'\n]\n","import { ASSET_TYPES } from '../shared/constants'\n\nexport function isObject(val) {\n    return typeof val == 'object' && val !== null\n}\n\nexport function isFunction(val) {\n    return typeof val === 'function';\n}\n\n\nexport function proxy(vm,data,key){\n    Object.defineProperty(vm,key,{ // vm.a\n        get(){\n            return vm[data][key]; // vm._data.a\n        },\n        set(newValue){ // vm.a = 100;\n            vm[data][key] = newValue// vm._data.a = 100;\n        }\n    })\n}\n\n\n// 合并配置项，如生命周期等\nlet lifeCycleHooks = [\n    'beforeCreate',\n    'created',\n    'beforeMount',\n    'mounted',\n    'beforeUpdate',\n    'updated',\n    'beforeDestroy',\n    'destroyed',\n]\nlet strats = {}; // 存放各种策略\n\nfunction mergeHook(parentVal, childVal) {\n    if (childVal) {\n        if (parentVal) {\n            return parentVal.concat(childVal); // 后续\n        } else {\n            return [childVal]; // 第一次\n        }\n    } else {\n        return parentVal\n    }\n}\nlifeCycleHooks.forEach(hook => {\n    strats[hook] = mergeHook\n});\n\nexport function mergeOptions (parent,child) {\n    const options = {}\n    let key\n    for (key in parent) {\n        mergeField(key)\n    }\n    // 只有儿子中独有的，也需要加上\n    for (key in child) {\n        // 排除掉已经合并过的 属性\n        if (!parent.hasOwnProperty(key)) {\n            mergeField(key)\n        }\n    }\n\n    function mergeField (key) {\n         // 特殊属性: 如果有对应的策略就调用对应的策略即可\n        if (strats[key]) {\n            options[key] = strats[key](parent[key], child[key])\n        } else {\n            // 合并一般属性\n            // 儿子和父亲都有，用儿子覆盖父亲的\n            if (typeof parent[key] === 'object' && typeof child[key] === 'object') {\n                options[key] = { ...parent[key], ...child[key] }\n                // 父亲中有，儿子中没有，取父亲中的   \n            } else if (child[key] == null) {\n                options[key] = parent[key]\n            } else {\n                options[key] = child[key]\n            }\n        }\n    }\n    \n    return options\n}\n\n\n\nfunction mergeAssets (parentVal, childVal,vm, key) {\n  const res = Object.create(parentVal || null)\n  if (childVal) {\n    for (let key in childVal) {\n        res[key] = childVal[key]\n    }\n  } \n  return res\n}\n\nASSET_TYPES.forEach(function (type) {\n  strats[type + 's'] = mergeAssets\n})","// S1 拿到数组原型上的方法 （原来的方法）\nlet oldArrayProtoMethods = Array.prototype;\n\n//S2 创建新的原型基础对象：arrayMethods.__proto__ = Array.prototype\nexport let arrayMethods = Object.create(oldArrayProtoMethods);\n\n// S3 获取 数组中会改变原数组的方法\nlet methods = [\"push\", \"shift\", \"unshift\", \"pop\", \"reverse\", \"sort\", \"splice\"];\n\n// S4 调用的如果是以上七个方法，就会优先读取下面重写的，否则用原来的数组方法\nmethods.forEach((method) => {\n  // 接收参数\n  arrayMethods[method] = function (...args) {\n    //S5 要先执行原逻辑\n    const result = oldArrayProtoMethods[method].apply(this, args);\n    let inserted;\n\n    //S6 根据当前数组获取到observer实例\n    let ob = this.__ob__;\n\n    switch (method) {\n      case \"push\": // arr.push({a:1},{b:2})\n      case \"unshift\":\n        //这2个方法都是追加, 追加的内容可能是对象类型，应该被再次进行劫持\n        inserted = args;\n        break;\n      case \"splice\": // vue.$set原理\n        inserted = args.slice(2); // arr.splice(0,1,{a:1},{a:1},{a:1})\n      default:\n        break;\n    }\n\n    // S7 如果有新增的内容，要进行继续劫持,\n    // 需要观测的是 数组里的每一项，而不是数组\n    if (inserted) ob.observeArray(inserted);\n\n    // notify change\n    ob.dep.notify()\n\n    // S8 返回结果\n    return result;\n  };\n});\n","let id = 0\n\nexport default class Dep {\n  constructor () {\n    this.id = ++id\n    this.subs = []\n  }\n\n  depend () {\n    // 观测者模式\n    if (Dep.target) {\n      // this.subs.push(Dep.target) // 直接添加会导致wather重复加入  \n      Dep.target.addDep(this)\n    }\n  }\n\n  notify () {\n    this.subs.forEach(watcher => watcher.update())\n  }\n\n  addSub (watcher) {\n    this.subs.push(watcher)\n  }\n}\n\n\n\nDep.target = null\nlet stack = []\n\nexport function pushTarget (watcher) {\n  Dep.target = watcher\n  stack.push(watcher)\n}\n\nexport function popTarget () {\n  stack.pop()\n  Dep.target = stack[stack.length - 1]\n}\n","import { isObject } from \"../utils/index\";\nimport { arrayMethods } from \"./array\";\nimport Dep from './dep'\n\n// 基本原则：\n// 1.如果数据是对象：会将对象不停的递归 进行劫持\n// 2.如果是数组：会劫持数组的方法，并对数组中不是基本数据类型的 进行劫持\n\n// 劫持对象类型\nexport function observe(data) {\n  // 如果是对象才观测\n  if (!isObject(data)) {\n    return;\n  }\n  return new Observer(data);\n}\n\n// 劫持中心\nclass Observer {\n  constructor(data) {\n    this.dep = new Dep()\n\n    // S3 在所有被劫持过的属性上，都增加 __ob__属性\n    // data.__ob__ = this; // 直接这样写会在递归执行时，因为该属性爆栈\n    Object.defineProperty(data, \"__ob__\", {\n      value: this,\n      enumerable: false, //不可枚举的,以防止observeArray递归调用爆栈\n      configurable: false\n    });\n\n    if (Array.isArray(data)) {\n      //S2 单独处理 数组劫持的逻辑，因为数组并不能只是 简单检测它的key变化\n\n      //S2.1 对数组原来的方法进行改写：切片编程/高阶函数/代理模式\n      data.__proto__ = arrayMethods;\n\n      //S2.2 如果数组中的数据是对象类型，需要监控对象的变化\n      this.observeArray(data);\n    } else {\n      //S1 对对象中的所有属性 进行劫持\n      // 缺点：需要递归劫持嵌套对象的属性（增加get/set）,影响性能\n      // 所以 Vue3 改成了 proxy来监听\n      this.walk(data);\n    }\n  }\n\n  observeArray(data) {\n    // 对数组成员里的 嵌套数组/对象类型，进行递归劫持\n    data.forEach((item) => observe(item));\n  }\n\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n}\n\n// vue2会对对象进行遍历 ==> 每个属性用defineProperty重新定义\nfunction defineReactive(data, key, value) {\n  let dep = new Dep(); // 每个属性都有一个Dep实例\n  let childOb = observe(value); // 处理对象嵌套 ==> 递归调用\n\n  Object.defineProperty(data, key, {\n    get() {\n      if (Dep.target) {\n        dep.depend()\n        // 实现数组的依赖收集\n        if (childOb) {\n          childOb.dep.depend()\n          // 处理嵌套数组\n          if (Array.isArray(value)) {\n            dependArray(value)\n          }\n        }\n      }\n      return value;\n    },\n    set(newV) {\n      // Todo 更新视图\n      console.log(\"defineReactive监测到值发生了变化\");\n      //如果赋值的是一个新对象 ，也需要对这个新对象 进行劫持\n      observe(newV);\n      value = newV;\n\n      dep.notify();\n    },\n  });\n}\n\n\nfunction dependArray (value) {\n  for (let e, i = 0, l = value.length; i < l; i++) {\n    e = value[i]\n    e && e.__ob__ && e.__ob__.dep.depend()\n    if (Array.isArray(e)) {\n      dependArray(e)\n    }\n  }\n}","import { observe } from \"./observer/index\";\nimport { proxy } from './utils/index';\n\nexport function initState(vm) {\n    const opts = vm.$options;\n    if (opts.props) {\n        initProps(vm);\n    }\n    if (opts.methods) {\n        initMethods(vm);\n    }\n    if (opts.data) {\n        initData(vm);\n    }\n    if (opts.computed) {\n        initComputed(vm);\n    }\n    if (opts.watch) {\n        initWatch(vm);\n    }\n}\n\nfunction initData(vm) {\n    let data = vm.$options.data;\n    // 把data结果 挂载到 vue._data上\n    vm._data = data = typeof data == 'function'? data.call(vm):data;\n\n    //S3 数据劫持/响应式原理\n    // Vue2: 对象==> Object.defineProperty; 数组==> 单独处理\n\n    // 当去vm上取属性时 ，将属性的取值 代理到vm._data上\n    for(let key in data){\n        proxy(vm,'_data',key);\n    } \n    observe(data);\n}\n\nfunction initProps() {}\n\nfunction initMethods() {}\n\nfunction initComputed() {}\n\nfunction initWatch() {}","// 关于正则可视化，参见：https://jex.im/regulex/#!flags=&re=\n\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名\n// ?:匹配不捕获\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;  // <aaa:bbb>\n\n//S1 标签开头的正则 捕获的内容是标签名\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\n// console.log('开始标签是', startTagOpen)\n// console.log('开始标签测试结果是', '<my_name:is_ygm>'.match(startTagOpen))\n\n//S2 匹配标签结尾的 </div>\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\n// console.log('结束标签是', endTag)\n\n//S3 匹配属性 aaa=\"aaa\"  a='aaa'   a=aaa\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\n\n//S4 匹配标签的右箭头 >\nconst startTagClose = /^\\s*(\\/?)>/;\n\n//S5 匹配Vue里的变量模版 双大括号 {{ }}, 获取双括号里面的 内容\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\n\n/**\n作用: 把html模板内容转化为 AST节点对象\n\n流程:\nS1 解析模板内的 标签： startTagMatch / endTagMatch\n  - startTagMatch: parseStartTag + start\n  - endTagMatch: end +  advance\n \nS2 解析模板内的 文本：chars + advance  \n\nS3.1 parseStartTag: 获取tagName 和 tag属性 信息\nS3.2 start: 创建 root + 创建AstElement并入栈 + 更新currentParent\nS3.3 chars: 创建 文本类型的AstElement + 作为currentParent.children\nS3.4 end: 利用html文档标签的天然栈性质，创建节点之间的 父子关系\n*/\n\nlet root;\nlet currentParent;\nlet stack = [];\nlet html;\n\nexport function parseHTML(sourceHTML) {\n  // 每次解析前，都重置之前的解析结果\n  root = null\n  currentParent = null\n  stack = []\n\n  html = sourceHTML;\n  while (html) {\n    //只要html不为空字符串就一直解析\n    let textEnd = html.indexOf(\"<\"); // 当前解析的开头\n    // S1 说明是标签(开始/结束标签) ==> 处理标签\n    if (textEnd == 0) {\n      // 解析开始标签\n      const startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      // 解析结束标签\n      const endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n        continue;\n      }\n    }\n    //S2 处理文本\n    let text;\n    if (textEnd > 0) {\n      text = html.substring(0, textEnd);\n    }\n    if (text) {\n      advance(text.length);\n      chars(text);\n    }\n  }\n  // console.log('root是', root)\n  return root;\n}\n\n// 将字符串进行截取操作 + 更新html内容\nfunction advance(len) {\n  html = html.substring(len);\n}\n\n// 处理开始标签\nfunction parseStartTag() {\n  const start = html.match(startTagOpen);\n  if (start) {\n    const match = {\n      tagName: start[1],\n      attrs: [],\n    };\n    // 删除开始标签左半部分：<div id='app'> 中的 <div\n    advance(start[0].length);\n\n    let end;\n    let attr;\n    // 如果没有遇到开始标签的结尾，就不停的解析 能匹配到属性\n    while (\n      !(end = html.match(startTagClose)) &&\n      (attr = html.match(attribute))\n    ) {\n      // 保存属性值\n      match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] });\n      // 去掉html当前标签里的 属性\n      advance(attr[0].length);\n    }\n    // 删除匹配到的开始标签的 右结束标签 >\n    if (end) {\n      advance(end[0].length);\n    }\n    return match;\n  }\n  return false; // 不是开始标签\n}\n\nfunction start(tagName, attrs) {\n  let element = createASTElement(tagName, attrs);\n  if(!root) {\n    root = element;\n  }\n  currentParent = element;\n  stack.push(element);\n}\n\n// 处理结束标签 ==> 在结尾标签处，创建父子关系\nfunction end(tagName) {\n  let element = stack.pop();\n  currentParent = stack[stack.length-1];\n  // 在闭合时可以知道这个标签的父亲是谁\n  if(currentParent){ \n    element.parent = currentParent;\n    currentParent.children.push(element);\n  }\n}\n\n// 处理文本\nfunction chars(text) {\n  text = text.trim();\n  if(text){\n    currentParent.children.push({\n      type:3,\n      text\n    })\n  }\n}\n\n// 创建ast元素节点\nfunction createASTElement(tagName, attrs) {\n  return {\n    tag: tagName, // 标签名\n    type: 1, // 元素类型\n    attrs,\n    parent: null,\n    children: [],  \n  }\n}\n","// 核心思路就是将模板转化成 下面这段字符串\n// 即 把AST对象 转化为Render函数的 函数体\n\n// <div id=\"app\" style=\"color:red\"> <p>hello {{name}} </p> hello </div>\n// 将ast树 再次转化成js的语法\n// _c(\"div\",{id:app},_c(\"p\",undefined,_v('hello' + _s(name) )),_v('hello')) \n\n\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\n// 生成host元素类型标签 对应的 字符串\nexport function generate(el) {\n    let children = genChildren(el);\n    let code = `_c('${el.tag}',${\n        el.attrs.length? `${genProps(el.attrs)}`:'undefined'\n    }${\n        children?`,${children}`:''\n    })`;\n    return code;\n}\n\n\n// 拼接属性\nfunction genProps(attrs) {\n    let str = '';\n    for (let i = 0; i < attrs.length; i++) {\n        let attr = attrs[i];\n        if (attr.name === 'style') {\n            let obj = {}; // 对样式进行特殊的处理 \n            attr.value.split(';').forEach(item => {\n                let [key, value] = item.split(':');\n                obj[key] = value;\n            });\n            attr.value = obj;\n        }\n        str += `${attr.name}:${JSON.stringify(attr.value)},`;\n    }\n    return `{${str.slice(0,-1)}}`;\n}\n\n\n// 处理标签 子节点对应的 字符串\nfunction genChildren(el){\n    let children = el.children;\n    if(children && children.length > 0){\n        return `${children.map(c => gen(c)).join(',')}`\n    } else {\n        return false;\n    }\n}\n\n\nfunction gen(node){\n    // 元素类型标签， 递归调用\n    if(node.type == 1){\n        return generate(node);\n        // 处理文本节点 和 变量文本节点\n    } else {\n        // 节点内容举例: <div>a {{  name  }} b{{age}} c </div>\n        // 希望转化为: _v('a' + _s(name) + 'b' + _s(age) + 'c')\n        \n        let text = node.text; \n        let tokens = [];\n        let match,index;\n        // 变量含义: 每次的偏移量\n        // 正则特性: 只要是全局匹配 就需要将lastIndex每次匹配的时候调到0处\n        let lastIndex = defaultTagRE.lastIndex = 0; \n        while(match = defaultTagRE.exec(text)){\n            index = match.index;\n            // 纯文本类型\n            if(index > lastIndex){\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)));\n            }\n            // 变量文本类型\n            tokens.push(`_s(${match[1].trim()})`);\n            lastIndex = index + match[0].length;\n        }\n        // 剩余的 纯文本类型\n        if(lastIndex < text.length){\n            tokens.push(JSON.stringify(text.slice(lastIndex)))\n        }\n        return `_v(${tokens.join('+')})`;\n    }\n}","import { parseHTML } from \"./parse\";\nimport { generate } from \"./generate\";\n\n// 作用：把 html模板 => render函数\n// 流程: html转化为AST => with + new Function\nexport function compileToFunctions(template) {\n  //1. 把html代码转化成 \"ast\"语法 （ast树，可以用来描述语言本身）\n  let ast = parseHTML(template);\n\n  //2. 字符串拼接(模板引擎), 生成函数体\n  let fnBody = generate(ast);\n   \n  // 3. 注入变量上下文环境 new Function + with\n  let renderFn = new Function(`with(this){ return ${fnBody}}`); \n\n  // vue的render函数执行，返回的就是虚拟dom\n  // console.log('render--', renderFn)\n  return renderFn;\n}\n","\n\nconst callbacks = []\nlet waiting = false\n\nexport function nextTick (cb) {\n  callbacks.push(cb)\n\n  if (!waiting) {\n    setTimeout(flushCallbacks, 0)\n    waiting = true;\n  }\n}\n\n\nfunction flushCallbacks() {\n  callbacks.forEach(cb => cb())\n  waiting = false\n  callbacks = []\n}","import {nextTick} from '../utils/next-tick'\n\nlet queue = []\nlet has = {}\n\nexport function queueWatcher (watcher) {\n  const id = watcher.id\n  if (has[id] == null) {\n    queue.push(watcher)\n    has[id] = true\n    nextTick(flushSchedulerQueue)\n  }\n}\n\nfunction flushSchedulerQueue() {\n  queue.forEach(watcher => watcher.run())\n  queue = []\n  has = {}\n}","import { pushTarget, popTarget } from './dep'\nimport {queueWatcher} from './scheduler'\n\n\nlet id = 0\n\nclass Watcher {\n    constructor (vm, expOrFn, cb,options) {\n        this.vm = vm\n        this.cb = cb\n        this.options = options\n        // 每个Watcher都有一个id\n        this.id = ++id\n        // dep相关\n        this.deps = []\n        this.depIds = new Set()\n\n        // 设置getter\n        this.getter = expOrFn\n        // 调用get\n        this.get()\n    }\n\n    get() {\n        pushTarget(this)\n        this.getter()\n        popTarget()\n    }\n\n    update() {\n        queueWatcher(this) \n    }\n\n    run() {\n        this.get()\n    }\n\n    addDep (dep) {\n        const id = dep.id\n        if (!this.depIds.has(id)) {\n          this.depIds.add(id)\n          this.deps.push(dep)\n          dep.addSub(this)\n        }\n    }\n}\n\n\n\n\n\nexport default Watcher","export function patch(oldVnode, vnode) {\n    // 判断是初次渲染还是后续更新 ==> 是否是 原生真实dom\n    // 只有在 原生真实dom节点上，才存在 nodeType属性\n    const isRealElement = oldVnode.nodeType;\n\n    if (isRealElement) {\n        const oldElm = oldVnode   // <div id='app'>\n        const parentElm = oldElm.parentNode;\n        let elm = createElm(vnode);\n        // 插入真实dom\n        parentElm.insertBefore(elm, oldElm.nextSibling);\n        parentElm.removeChild(oldElm);\n        // 返回节点\n        return elm\n    }\n}\n\nfunction createElm(vnode) {\n    let { tag, data, children, key, text, vm } = vnode\n    if (typeof tag === 'string') { // 元素\n        // 虚拟节点会有一个el属性 对应真实节点\n        vnode.el = document.createElement(tag); \n        // 更新属性\n        updateProperties(vnode);\n        // 递归创建子节点真实dom\n        children.forEach(child => {\n            vnode.el.appendChild(createElm(child))\n        });\n    } else {  // 文本\n        vnode.el = document.createTextNode(text);\n    }\n    return vnode.el\n}\n\n// 更新属性\nfunction updateProperties(vnode, oldProps = {}) {\n    let newProps = vnode.data || {};\n    let el = vnode.el;\n    //以新的为准\n    for (let key in newProps) { \n        if (key === 'style') {\n            for (let styleName in newProps.style) {\n                // 新增样式\n                el.style[styleName] = newProps.style[styleName];\n            }\n        } else if (key === 'class') {\n            el.className = newProps.class;\n        } else {\n            el.setAttribute(key, newProps[key]);\n        }\n    }\n}","import Watcher from './observer/watcher'\nimport { patch } from \"./vdom/patch\"\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n      // 既有初始化 又有更新 \n      const vm = this;\n      vm.$el = patch(vm.$el, vnode);\n  };\n}\n\nexport function mountComponent(vm, el) {\n  const options = vm.$options\n  vm.$el = el\n\n  // 发布生命周期钩子\n  callHook(vm, 'beforeMount')\n\n  // 更新函数: 数据变化后, 会再次调用此函数\n  //    vm._render: 通过render函数，生成虚拟dom\n  //    vm._update: 用虚拟dom 生成真实dom\n  let updateComponent = () => {\n      console.log('updateComponent进行了更新')\n      vm._update(vm._render());\n  }\n  // 渲染watcher, 每个组件都有一个watcher\n  // true表示是一个渲染过程\n  new Watcher(vm, updateComponent, () => {}, true)\n\n  // 发布生命周期钩子\n  callHook(vm, 'mounted')\n}\n\n\nexport function callHook (vm, hook) {\n  const handlers = vm.$options[hook];\n  if (handlers) {\n    // 找到对应的钩子依次执行\n    for (var i = 0; i < handlers.length; i++) {\n      handlers[i].call(vm)\n    }\n  }\n \n}","import { initState } from \"./state\";\nimport { compileToFunctions } from \"./compiler/index\";\nimport { mountComponent, callHook } from \"./lifecycle\";\nimport { mergeOptions } from './utils/index'\nimport { nextTick } from './utils/next-tick'\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    // 属性合并\n    vm.$options = mergeOptions(vm.constructor.options,options);\n    // console.log('vm.$options', vm.$options)\n\n    // 发布生命周期钩子\n    callHook(vm, 'beforeCreate')\n\n    // S2 对初始化数据的类型进行 逻辑细分 ==> Props/ Data/ Computed等\n    initState(vm);\n\n    // 发布生命周期钩子\n    callHook(vm, 'created')\n\n    // S3 准备模板编译\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n\n  // S3 编译过程\n  // 把模板转化成 对应的渲染函数render ==>\n  // 虚拟dom vnode: 增加额外的对象属性 && 用diff算法来 更新虚拟dom ==>\n  // 生成真实dom\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n    vm.$el = el;\n\n    // 编译优先级： render方法 > template属性 > el的内容\n    if (!options.render) {\n      let template = options.template;\n      if (!template && el) {\n        // 也没有传递template 就取el的内容作为模板\n        template = el.outerHTML;\n      }\n      //S3.1 将模板编译成render函数\n      const render = compileToFunctions(template);\n      options.render = render;\n    }\n\n    // 需要挂载这个组件\n    mountComponent(vm,el);\n  };\n\n\n  Vue.prototype.$nextTick = nextTick\n}\n","export function createElement(vm, tag, data = {}, ...children) {\n    let key = data.key\n    // key不属于data，而是一个单独的vdom属性\n    if (key) {\n        delete data.key\n    }\n    return vnode(vm, tag, data, key, children, undefined);\n}\n\nexport function createTextNode(vm, text) {\n    return vnode(vm, undefined, undefined, undefined, undefined, text);\n}\n\nfunction vnode(vm, tag, data, key, children, text) {\n    return {\n        vm,\n        tag,\n        data,\n        key,\n        children,\n        text,\n        // .....\n    }\n}","import {createElement, createTextNode} from './vdom/index'\n\nexport function renderMixin(Vue){\n    Vue.prototype._c = function(){\n        return createElement(this,...arguments)\n    }  \n    Vue.prototype._v = function (text) { \n        return createTextNode(this,text)\n    }\n    Vue.prototype._s = function(val){ \n        return val == null ? '' : (typeof val === 'object' ? JSON.stringify(val) : val) ;\n    }\n\n    Vue.prototype._render = function(){\n       const vm = this;\n       // render就是我们实现出的render参数方法，同时也有可能是用户写的\n       let render = vm.$options.render; \n       let vnode = render.call(vm);\n       return vnode;\n    }\n}","import { mergeOptions } from '../utils/index'\n\nexport function initMixin (Vue) {\n  \n  Vue.mixin = function(mixin) {\n    this.options = mergeOptions(this.options, mixin); \n    return this;\n  }\n}\n","\nimport { ASSET_TYPES } from '../shared/constants'\nimport { mergeOptions } from '../utils/index'\n\n\nexport function initExtend (Vue) {\n  Vue.cid = 0\n  let cid = 1\n\n  Vue.extend = function (extendOptions) {\n    // console.log('extendOptions', extendOptions)\n    const Super = this\n\n    const Sub = function VueComponent (options) {\n      this._init(options)\n    }\n    Sub.prototype = Object.create(Super.prototype)\n    Sub.prototype.constructor = Sub\n    Sub.options = mergeOptions(\n      Super.options,\n      extendOptions\n    )\n\n    // 返回子类\n    return Sub\n    \n  }\n}\n\n\nfunction initProps (Comp) {\n  const props = Comp.options.props\n  for (const key in props) {\n    proxy(Comp.prototype, `_props`, key)\n  }\n}\n\nfunction initComputed (Comp) {\n  const computed = Comp.options.computed\n  for (const key in computed) {\n    defineComputed(Comp.prototype, key, computed[key])\n  }\n}\n","\nimport { ASSET_TYPES } from '../shared/constants'\n\nexport function initAssetRegisters (Vue) {\n\n  ASSET_TYPES.forEach(type => {\n    Vue[type] = function (id, definition) {\n      if (type === 'component') {\n        definition.name = definition.name || id\n        definition = this.options._base.extend(definition)\n      }\n\n      if (type === 'directive' && typeof definition === 'function') {\n        // todo\n      }\n\n      if (type === 'filter') {\n        // todo\n      }\n\n      this.options[type + 's'][id] = definition\n      // return definition\n    }\n  })\n}\n","import {initMixin} from './mixin'\nimport { ASSET_TYPES } from '../shared/constants'\nimport {initExtend} from './extend'\nimport {initAssetRegisters} from './assets'\n\nexport function initGlobalApi(Vue) {\n    // 用来存放全局的配置: 每个组件初始化时，都会和options选项 进行合并\n    Vue.options = {}; \n    \n    initMixin(Vue)\n\n    ASSET_TYPES.forEach(type => {\n        Vue.options[type + 's'] = {}\n    })\n\n    Vue.options._base = Vue\n\n    initExtend(Vue)\n    initAssetRegisters(Vue)\n \n}","// 入口：对Vue进行声明和扩展\nimport { initMixin } from \"./init\";\nimport { renderMixin } from \"./render\";\nimport { lifecycleMixin } from \"./lifecycle\";\nimport { initGlobalApi } from \"./global-api/index\";\n\nfunction Vue(options){\n   //S1 初始化数据\n   this._init(options); \n}\n\n//代码技巧：对Vue对象的 原型进行扩展==> 写成一个个的插件，从而解偶代码\ninitMixin(Vue);\n\nrenderMixin(Vue);    // 定义vm._render\nlifecycleMixin(Vue); // 定义vm._update\n\n// 直接在类上扩展\ninitGlobalApi(Vue);\n\nexport default Vue;"],"names":["ASSET_TYPES","isObject","val","proxy","vm","data","key","Object","defineProperty","get","set","newValue","lifeCycleHooks","strats","mergeHook","parentVal","childVal","concat","forEach","hook","mergeOptions","parent","child","options","mergeField","hasOwnProperty","mergeAssets","res","create","type","oldArrayProtoMethods","Array","prototype","arrayMethods","methods","method","args","result","apply","inserted","ob","__ob__","slice","observeArray","dep","notify","id","Dep","subs","target","addDep","watcher","update","push","stack","pushTarget","popTarget","pop","length","observe","Observer","value","enumerable","configurable","isArray","__proto__","walk","item","keys","defineReactive","childOb","depend","dependArray","newV","console","log","e","i","l","initState","opts","$options","props","initData","computed","watch","_data","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","root","currentParent","html","parseHTML","sourceHTML","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMatch","match","advance","end","text","substring","chars","len","attr","name","element","createASTElement","children","trim","tag","defaultTagRE","generate","el","genChildren","code","genProps","str","obj","split","JSON","stringify","map","c","gen","join","node","tokens","index","lastIndex","exec","compileToFunctions","template","ast","fnBody","renderFn","Function","callbacks","waiting","nextTick","cb","setTimeout","flushCallbacks","queue","has","queueWatcher","flushSchedulerQueue","run","Watcher","expOrFn","deps","depIds","Set","getter","add","addSub","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","elm","createElm","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","lifecycleMixin","Vue","_update","$el","mountComponent","callHook","updateComponent","_render","handlers","initMixin","_init","constructor","$mount","querySelector","render","outerHTML","$nextTick","undefined","renderMixin","_c","arguments","_v","_s","mixin","initExtend","cid","extend","extendOptions","Super","Sub","VueComponent","initAssetRegisters","definition","_base","initGlobalApi"],"mappings":"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"}