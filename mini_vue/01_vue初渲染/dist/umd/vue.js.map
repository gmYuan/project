{"version":3,"file":"vue.js","sources":["../../src/utils/index.js","../../src/observer/array.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/observer/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/index.js","../../src/render.js","../../src/global-api/index.js","../../src/index.js"],"sourcesContent":["export function isObject(val) {\n    return typeof val == 'object' && val !== null\n}\n\nexport function isFunction(val) {\n    return typeof val === 'function';\n}\n\n\nexport function proxy(vm,data,key){\n    Object.defineProperty(vm,key,{ // vm.a\n        get(){\n            return vm[data][key]; // vm._data.a\n        },\n        set(newValue){ // vm.a = 100;\n            vm[data][key] = newValue// vm._data.a = 100;\n        }\n    })\n}\n\n\n// 合并配置项，如生命周期等\nlet lifeCycleHooks = [\n    'beforeCreate',\n    'created',\n    'beforeMount',\n    'mounted',\n    'beforeUpdate',\n    'updated',\n    'beforeDestroy',\n    'destroyed',\n]\nlet strats = {}; // 存放各种策略\n\nfunction mergeHook(parentVal, childVal) {\n    if (childVal) {\n        if (parentVal) {\n            return parentVal.concat(childVal); // 后续\n        } else {\n            return [childVal]; // 第一次\n        }\n    } else {\n        return parentVal\n    }\n}\nlifeCycleHooks.forEach(hook => {\n    strats[hook] = mergeHook\n});\n\nexport function mergeOptions (parent,child) {\n    const options = {}\n    let key\n    for (key in parent) {\n        mergeField(key)\n    }\n    // 只有儿子中独有的，也需要加上\n    for (key in child) {\n        // 排除掉已经合并过的 属性\n        if (!parent.hasOwnProperty(key)) {\n            mergeField(key)\n        }\n    }\n\n    function mergeField (key) {\n         // 特殊属性: 如果有对应的策略就调用对应的策略即可\n        if (strats[key]) {\n            options[key] = strats[key](parent[key], child[key])\n        } else {\n            // 合并一般属性\n            // 儿子和父亲都有，用儿子覆盖父亲的\n            if (typeof parent[key] === 'object' && typeof child[key] === 'object') {\n                options[key] = { ...parent[key], ...child[key] }\n                // 父亲中有，儿子中没有，取父亲中的   \n            } else if (child[key] == null) {\n                options[key] = parent[key]\n            } else {\n                options[key] = child[key]\n            }\n        }\n    }\n    \n    return options\n}","// S1 拿到数组原型上的方法 （原来的方法）\nlet oldArrayProtoMethods = Array.prototype;\n\n//S2 创建新的原型基础对象：arrayMethods.__proto__ = Array.prototype\nexport let arrayMethods = Object.create(oldArrayProtoMethods);\n\n// S3 获取 数组中会改变原数组的方法\nlet methods = [\"push\", \"shift\", \"unshift\", \"pop\", \"reverse\", \"sort\", \"splice\"];\n\n// S4 调用的如果是以上七个方法，就会优先读取下面重写的，否则用原来的数组方法\nmethods.forEach((method) => {\n  // 接收参数\n  arrayMethods[method] = function (...args) {\n    //S5 要先执行原逻辑\n    const result = oldArrayProtoMethods[method].apply(this, args);\n    let inserted;\n\n    //S6 根据当前数组获取到observer实例\n    let ob = this.__ob__;\n\n    switch (method) {\n      case \"push\": // arr.push({a:1},{b:2})\n      case \"unshift\":\n        //这2个方法都是追加, 追加的内容可能是对象类型，应该被再次进行劫持\n        inserted = args;\n        break;\n      case \"splice\": // vue.$set原理\n        inserted = args.slice(2); // arr.splice(0,1,{a:1},{a:1},{a:1})\n      default:\n        break;\n    }\n\n    // S7 如果有新增的内容，要进行继续劫持,\n    // 需要观测的是 数组里的每一项，而不是数组\n    if (inserted) ob.observeArray(inserted);\n\n    // S8 返回结果\n    return result;\n  };\n});\n","let id = 0\n\nexport default class Dep {\n  constructor () {\n    this.id = ++id\n    this.subs = []\n  }\n\n  depend () {\n    // 观测者模式\n    if (Dep.target) {\n      // this.subs.push(Dep.target) // 直接添加会导致wather重复加入  \n      Dep.target.addDep(this)\n    }\n  }\n\n  notify () {\n    this.subs.forEach(watcher => watcher.update())\n  }\n\n  addSub (watcher) {\n    this.subs.push(watcher)\n  }\n}\n\n\n\nDep.target = null\nlet stack = []\n\nexport function pushTarget (watcher) {\n  Dep.target = watcher\n  stack.push(watcher)\n}\n\nexport function popTarget () {\n  stack.pop()\n  Dep.target = stack[stack.length - 1]\n}\n","import { isObject } from \"../utils/index\";\nimport { arrayMethods } from \"./array\";\nimport Dep from './dep'\n\n// 基本原则：\n// 1.如果数据是对象：会将对象不停的递归 进行劫持\n// 2.如果是数组：会劫持数组的方法，并对数组中不是基本数据类型的 进行劫持\n\n// 劫持对象类型\nexport function observe(data) {\n  // 如果是对象才观测\n  if (!isObject(data)) {\n    return;\n  }\n  return new Observer(data);\n}\n\n// 劫持中心\nclass Observer {\n  constructor(data) {\n    // S3 在所有被劫持过的属性上，都增加 __ob__属性\n    // data.__ob__ = this; // 直接这样写会在递归执行时，因为该属性爆栈\n    Object.defineProperty(data, \"__ob__\", {\n      value: this,\n      enumerable: false, //不可枚举的,以防止observeArray递归调用爆栈\n      configurable: false\n    });\n\n    if (Array.isArray(data)) {\n      //S2 单独处理 数组劫持的逻辑，因为数组并不能只是 简单检测它的key变化\n\n      //S2.1 对数组原来的方法进行改写：切片编程/高阶函数/代理模式\n      data.__proto__ = arrayMethods;\n\n      //S2.2 如果数组中的数据是对象类型，需要监控对象的变化\n      this.observeArray(data);\n    } else {\n      //S1 对对象中的所有属性 进行劫持\n      // 缺点：需要递归劫持嵌套对象的属性（增加get/set）,影响性能\n      // 所以 Vue3 改成了 proxy来监听\n      this.walk(data);\n    }\n  }\n\n  observeArray(data) {\n    // 对数组成员里的 嵌套数组/对象类型，进行递归劫持\n    data.forEach((item) => observe(item));\n  }\n\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n}\n\n// vue2会对对象进行遍历 ==> 每个属性用defineProperty重新定义\nfunction defineReactive(data, key, value) {\n  let dep = new Dep(); // 每个属性都有一个Dep实例\n  observe(value); // 处理对象嵌套 ==> 递归调用\n\n  Object.defineProperty(data, key, {\n    get() {\n      if (Dep.target) {\n        dep.depend()\n      }\n      console.log('get的dep', dep)\n      return value;\n    },\n    set(newV) {\n      // Todo 更新视图\n      console.log(\"defineReactive监测到值发生了变化\");\n      //如果赋值的是一个新对象 ，也需要对这个新对象 进行劫持\n      observe(newV);\n      value = newV;\n\n      dep.notify();\n    },\n  });\n}\n","import { observe } from \"./observer/index\";\nimport { proxy } from './utils/index';\n\nexport function initState(vm) {\n    const opts = vm.$options;\n    if (opts.props) {\n        initProps(vm);\n    }\n    if (opts.methods) {\n        initMethods(vm);\n    }\n    if (opts.data) {\n        initData(vm);\n    }\n    if (opts.computed) {\n        initComputed(vm);\n    }\n    if (opts.watch) {\n        initWatch(vm);\n    }\n}\n\nfunction initData(vm) {\n    let data = vm.$options.data;\n    // 把data结果 挂载到 vue._data上\n    vm._data = data = typeof data == 'function'? data.call(vm):data;\n\n    //S3 数据劫持/响应式原理\n    // Vue2: 对象==> Object.defineProperty; 数组==> 单独处理\n\n    // 当去vm上取属性时 ，将属性的取值 代理到vm._data上\n    for(let key in data){\n        proxy(vm,'_data',key);\n    } \n    observe(data);\n}\n\nfunction initProps() {}\n\nfunction initMethods() {}\n\nfunction initComputed() {}\n\nfunction initWatch() {}","// 关于正则可视化，参见：https://jex.im/regulex/#!flags=&re=\n\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名\n// ?:匹配不捕获\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;  // <aaa:bbb>\n\n//S1 标签开头的正则 捕获的内容是标签名\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\n// console.log('开始标签是', startTagOpen)\n// console.log('开始标签测试结果是', '<my_name:is_ygm>'.match(startTagOpen))\n\n//S2 匹配标签结尾的 </div>\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\n// console.log('结束标签是', endTag)\n\n//S3 匹配属性 aaa=\"aaa\"  a='aaa'   a=aaa\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\n\n//S4 匹配标签的右箭头 >\nconst startTagClose = /^\\s*(\\/?)>/;\n\n//S5 匹配Vue里的变量模版 双大括号 {{ }}, 获取双括号里面的 内容\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\n\n/**\n作用: 把html模板内容转化为 AST节点对象\n\n流程:\nS1 解析模板内的 标签： startTagMatch / endTagMatch\n  - startTagMatch: parseStartTag + start\n  - endTagMatch: end +  advance\n \nS2 解析模板内的 文本：chars + advance  \n\nS3.1 parseStartTag: 获取tagName 和 tag属性 信息\nS3.2 start: 创建 root + 创建AstElement并入栈 + 更新currentParent\nS3.3 chars: 创建 文本类型的AstElement + 作为currentParent.children\nS3.4 end: 利用html文档标签的天然栈性质，创建节点之间的 父子关系\n*/\n\nlet root;\nlet currentParent;\nlet stack = [];\nlet html;\n\nexport function parseHTML(sourceHTML) {\n  // 每次解析前，都重置之前的解析结果\n  root = null\n  currentParent = null\n  stack = []\n\n  html = sourceHTML;\n  while (html) {\n    //只要html不为空字符串就一直解析\n    let textEnd = html.indexOf(\"<\"); // 当前解析的开头\n    // S1 说明是标签(开始/结束标签) ==> 处理标签\n    if (textEnd == 0) {\n      // 解析开始标签\n      const startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      // 解析结束标签\n      const endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n        continue;\n      }\n    }\n    //S2 处理文本\n    let text;\n    if (textEnd > 0) {\n      text = html.substring(0, textEnd);\n    }\n    if (text) {\n      advance(text.length);\n      chars(text);\n    }\n  }\n  // console.log('root是', root)\n  return root;\n}\n\n// 将字符串进行截取操作 + 更新html内容\nfunction advance(len) {\n  html = html.substring(len);\n}\n\n// 处理开始标签\nfunction parseStartTag() {\n  const start = html.match(startTagOpen);\n  if (start) {\n    const match = {\n      tagName: start[1],\n      attrs: [],\n    };\n    // 删除开始标签左半部分：<div id='app'> 中的 <div\n    advance(start[0].length);\n\n    let end;\n    let attr;\n    // 如果没有遇到开始标签的结尾，就不停的解析 能匹配到属性\n    while (\n      !(end = html.match(startTagClose)) &&\n      (attr = html.match(attribute))\n    ) {\n      // 保存属性值\n      match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] });\n      // 去掉html当前标签里的 属性\n      advance(attr[0].length);\n    }\n    // 删除匹配到的开始标签的 右结束标签 >\n    if (end) {\n      advance(end[0].length);\n    }\n    return match;\n  }\n  return false; // 不是开始标签\n}\n\nfunction start(tagName, attrs) {\n  let element = createASTElement(tagName, attrs);\n  if(!root) {\n    root = element;\n  }\n  currentParent = element;\n  stack.push(element);\n}\n\n// 处理结束标签 ==> 在结尾标签处，创建父子关系\nfunction end(tagName) {\n  let element = stack.pop();\n  currentParent = stack[stack.length-1];\n  // 在闭合时可以知道这个标签的父亲是谁\n  if(currentParent){ \n    element.parent = currentParent;\n    currentParent.children.push(element);\n  }\n}\n\n// 处理文本\nfunction chars(text) {\n  text = text.trim();\n  if(text){\n    currentParent.children.push({\n      type:3,\n      text\n    })\n  }\n}\n\n// 创建ast元素节点\nfunction createASTElement(tagName, attrs) {\n  return {\n    tag: tagName, // 标签名\n    type: 1, // 元素类型\n    attrs,\n    parent: null,\n    children: [],  \n  }\n}\n","// 核心思路就是将模板转化成 下面这段字符串\n// 即 把AST对象 转化为Render函数的 函数体\n\n// <div id=\"app\" style=\"color:red\"> <p>hello {{name}} </p> hello </div>\n// 将ast树 再次转化成js的语法\n// _c(\"div\",{id:app},_c(\"p\",undefined,_v('hello' + _s(name) )),_v('hello')) \n\n\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\n// 生成host元素类型标签 对应的 字符串\nexport function generate(el) {\n    let children = genChildren(el);\n    let code = `_c('${el.tag}',${\n        el.attrs.length? `${genProps(el.attrs)}`:'undefined'\n    }${\n        children?`,${children}`:''\n    })`;\n    return code;\n}\n\n\n// 拼接属性\nfunction genProps(attrs) {\n    let str = '';\n    for (let i = 0; i < attrs.length; i++) {\n        let attr = attrs[i];\n        if (attr.name === 'style') {\n            let obj = {}; // 对样式进行特殊的处理 \n            attr.value.split(';').forEach(item => {\n                let [key, value] = item.split(':');\n                obj[key] = value;\n            });\n            attr.value = obj;\n        }\n        str += `${attr.name}:${JSON.stringify(attr.value)},`;\n    }\n    return `{${str.slice(0,-1)}}`;\n}\n\n\n// 处理标签 子节点对应的 字符串\nfunction genChildren(el){\n    let children = el.children;\n    if(children && children.length > 0){\n        return `${children.map(c => gen(c)).join(',')}`\n    } else {\n        return false;\n    }\n}\n\n\nfunction gen(node){\n    // 元素类型标签， 递归调用\n    if(node.type == 1){\n        return generate(node);\n        // 处理文本节点 和 变量文本节点\n    } else {\n        // 节点内容举例: <div>a {{  name  }} b{{age}} c </div>\n        // 希望转化为: _v('a' + _s(name) + 'b' + _s(age) + 'c')\n        \n        let text = node.text; \n        let tokens = [];\n        let match,index;\n        // 变量含义: 每次的偏移量\n        // 正则特性: 只要是全局匹配 就需要将lastIndex每次匹配的时候调到0处\n        let lastIndex = defaultTagRE.lastIndex = 0; \n        while(match = defaultTagRE.exec(text)){\n            index = match.index;\n            // 纯文本类型\n            if(index > lastIndex){\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)));\n            }\n            // 变量文本类型\n            tokens.push(`_s(${match[1].trim()})`);\n            lastIndex = index + match[0].length;\n        }\n        // 剩余的 纯文本类型\n        if(lastIndex < text.length){\n            tokens.push(JSON.stringify(text.slice(lastIndex)))\n        }\n        return `_v(${tokens.join('+')})`;\n    }\n}","import { parseHTML } from \"./parse\";\nimport { generate } from \"./generate\";\n\n// 作用：把 html模板 => render函数\n// 流程: html转化为AST => with + new Function\nexport function compileToFunctions(template) {\n  //1. 把html代码转化成 \"ast\"语法 （ast树，可以用来描述语言本身）\n  let ast = parseHTML(template);\n\n  //2. 字符串拼接(模板引擎), 生成函数体\n  let fnBody = generate(ast);\n   \n  // 3. 注入变量上下文环境 new Function + with\n  let renderFn = new Function(`with(this){ return ${fnBody}}`); \n\n  // vue的render函数执行，返回的就是虚拟dom\n  // console.log('render--', renderFn)\n  return renderFn;\n}\n","import { pushTarget, popTarget } from './dep'\n\n\nlet id = 0\n\nclass Watcher {\n    constructor (vm, expOrFn, cb,options) {\n        this.vm = vm\n        this.cb = cb\n        this.options = options\n        // 每个Watcher都有一个id\n        this.id = ++id\n        // dep相关\n        this.deps = []\n        this.depIds = new Set()\n\n        // 设置getter\n        this.getter = expOrFn\n        // 调用get\n        this.get()\n    }\n\n    get() {\n        pushTarget(this)\n        this.getter()\n        popTarget()\n    }\n\n    update() {\n        this.get()\n    }\n\n    addDep (dep) {\n        const id = dep.id\n        if (!this.depIds.has(id)) {\n          this.depIds.add(id)\n          this.deps.push(dep)\n          dep.addSub(this)\n        }\n    }\n}\n\nexport default Watcher","export function patch(oldVnode, vnode) {\n    // 判断是初次渲染还是后续更新 ==> 是否是 原生真实dom\n    // 只有在 原生真实dom节点上，才存在 nodeType属性\n    const isRealElement = oldVnode.nodeType;\n\n    if (isRealElement) {\n        const oldElm = oldVnode   // <div id='app'>\n        const parentElm = oldElm.parentNode;\n        let elm = createElm(vnode);\n        // 插入真实dom\n        parentElm.insertBefore(elm, oldElm.nextSibling);\n        parentElm.removeChild(oldElm);\n        // 返回节点\n        return elm\n    }\n}\n\nfunction createElm(vnode) {\n    let { tag, data, children, key, text, vm } = vnode\n    if (typeof tag === 'string') { // 元素\n        // 虚拟节点会有一个el属性 对应真实节点\n        vnode.el = document.createElement(tag); \n        // 更新属性\n        updateProperties(vnode);\n        // 递归创建子节点真实dom\n        children.forEach(child => {\n            vnode.el.appendChild(createElm(child))\n        });\n    } else {  // 文本\n        vnode.el = document.createTextNode(text);\n    }\n    return vnode.el\n}\n\n// 更新属性\nfunction updateProperties(vnode, oldProps = {}) {\n    let newProps = vnode.data || {};\n    let el = vnode.el;\n    //以新的为准\n    for (let key in newProps) { \n        if (key === 'style') {\n            for (let styleName in newProps.style) {\n                // 新增样式\n                el.style[styleName] = newProps.style[styleName];\n            }\n        } else if (key === 'class') {\n            el.className = newProps.class;\n        } else {\n            el.setAttribute(key, newProps[key]);\n        }\n    }\n}","import Watcher from './observer/watcher'\nimport { patch } from \"./vdom/patch\"\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n      // 既有初始化 又有更新 \n      const vm = this;\n      vm.$el = patch(vm.$el, vnode);\n  };\n}\n\nexport function mountComponent(vm, el) {\n  const options = vm.$options\n  vm.$el = el\n\n  // 发布生命周期钩子\n  callHook(vm, 'beforeMount')\n\n  // 更新函数: 数据变化后, 会再次调用此函数\n  //    vm._render: 通过render函数，生成虚拟dom\n  //    vm._update: 用虚拟dom 生成真实dom\n  let updateComponent = () => {\n      vm._update(vm._render());\n  }\n  // 渲染watcher, 每个组件都有一个watcher\n  // true表示是一个渲染过程\n  new Watcher(vm, updateComponent, () => {}, true)\n\n  // 发布生命周期钩子\n  callHook(vm, 'mounted')\n}\n\n\nexport function callHook (vm, hook) {\n  const handlers = vm.$options[hook];\n  if (handlers) {\n    // 找到对应的钩子依次执行\n    for (var i = 0; i < handlers.length; i++) {\n      handlers[i].call(vm)\n    }\n  }\n \n}","import { initState } from \"./state\";\nimport { compileToFunctions } from \"./compiler/index\";\nimport { mountComponent, callHook } from \"./lifecycle\";\nimport { mergeOptions } from './utils/index'\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    // 属性合并\n    vm.$options = mergeOptions(vm.constructor.options,options);\n    // console.log('vm.$options', vm.$options)\n\n    // 发布生命周期钩子\n    callHook(vm, 'beforeCreate')\n\n    // S2 对初始化数据的类型进行 逻辑细分 ==> Props/ Data/ Computed等\n    initState(vm);\n\n    // 发布生命周期钩子\n    callHook(vm, 'created')\n\n    // S3 准备模板编译\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n\n  // S3 编译过程\n  // 把模板转化成 对应的渲染函数render ==>\n  // 虚拟dom vnode: 增加额外的对象属性 && 用diff算法来 更新虚拟dom ==>\n  // 生成真实dom\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n    vm.$el = el;\n\n    // 编译优先级： render方法 > template属性 > el的内容\n    if (!options.render) {\n      let template = options.template;\n      if (!template && el) {\n        // 也没有传递template 就取el的内容作为模板\n        template = el.outerHTML;\n      }\n      //S3.1 将模板编译成render函数\n      const render = compileToFunctions(template);\n      options.render = render;\n    }\n\n    // 需要挂载这个组件\n    mountComponent(vm,el);\n  };\n}\n","export function createElement(vm, tag, data = {}, ...children) {\n    let key = data.key\n    // key不属于data，而是一个单独的vdom属性\n    if (key) {\n        delete data.key\n    }\n    return vnode(vm, tag, data, key, children, undefined);\n}\n\nexport function createTextNode(vm, text) {\n    return vnode(vm, undefined, undefined, undefined, undefined, text);\n}\n\nfunction vnode(vm, tag, data, key, children, text) {\n    return {\n        vm,\n        tag,\n        data,\n        key,\n        children,\n        text,\n        // .....\n    }\n}","import {createElement, createTextNode} from './vdom/index'\n\nexport function renderMixin(Vue){\n    Vue.prototype._c = function(){\n        return createElement(this,...arguments)\n    }  \n    Vue.prototype._v = function (text) { \n        return createTextNode(this,text)\n    }\n    Vue.prototype._s = function(val){ \n        return val == null ? '' : (typeof val === 'object' ? JSON.stringify(val) : val) ;\n    }\n\n    Vue.prototype._render = function(){\n       const vm = this;\n       // render就是我们实现出的render参数方法，同时也有可能是用户写的\n       let render = vm.$options.render; \n       let vnode = render.call(vm);\n       return vnode;\n    }\n}","import { mergeOptions } from '../utils/index'\n\nexport function initGlobalApi(Vue) {\n    // 用来存放全局的配置: 每个组件初始化时，都会和options选项 进行合并\n    Vue.options = {}; \n    \n    Vue.mixin = function(mixin) {\n        this.options = mergeOptions(this.options, mixin); \n        return this;\n    }\n\n    // test\n    // Vue.mixin({a:1, beforeCreate() {console.log('mixin1')}  })\n    // Vue.mixin({b:2, beforeCreate() {console.log('mixin2')}  })\n    // console.log('deee', Vue.options)\n}","// 入口：对Vue进行声明和扩展\nimport { initMixin } from \"./init\";\nimport { renderMixin } from \"./render\";\nimport { lifecycleMixin } from \"./lifecycle\";\nimport { initGlobalApi } from \"./global-api/index\";\n\nfunction Vue(options){\n   //S1 初始化数据\n   this._init(options); \n}\n\n//代码技巧：对Vue对象的 原型进行扩展==> 写成一个个的插件，从而解偶代码\ninitMixin(Vue);\n\nrenderMixin(Vue);    // 定义vm._render\nlifecycleMixin(Vue); // 定义vm._update\n\n// 直接在类上扩展\ninitGlobalApi(Vue);\n\nexport default Vue;"],"names":["isObject","val","proxy","vm","data","key","Object","defineProperty","get","set","newValue","lifeCycleHooks","strats","mergeHook","parentVal","childVal","concat","forEach","hook","mergeOptions","parent","child","options","mergeField","hasOwnProperty","oldArrayProtoMethods","Array","prototype","arrayMethods","create","methods","method","args","result","apply","inserted","ob","__ob__","slice","observeArray","id","Dep","subs","target","addDep","watcher","update","push","stack","pushTarget","popTarget","pop","length","observe","Observer","value","enumerable","configurable","isArray","__proto__","walk","item","keys","defineReactive","dep","depend","console","log","newV","notify","initState","opts","$options","props","initData","computed","watch","_data","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","root","currentParent","html","parseHTML","sourceHTML","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMatch","match","advance","end","text","substring","chars","len","attr","name","element","createASTElement","children","trim","type","tag","defaultTagRE","generate","el","genChildren","code","genProps","str","i","obj","split","JSON","stringify","map","c","gen","join","node","tokens","index","lastIndex","exec","compileToFunctions","template","ast","fnBody","renderFn","Function","Watcher","expOrFn","cb","deps","depIds","Set","getter","has","add","addSub","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","elm","createElm","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","lifecycleMixin","Vue","_update","$el","mountComponent","callHook","updateComponent","_render","handlers","initMixin","_init","constructor","$mount","querySelector","render","outerHTML","undefined","renderMixin","_c","arguments","_v","_s","initGlobalApi","mixin"],"mappings":"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"}